@ENEMY_ATTACK,ARGS,ARG:0,ARG:1,ARG:2  ;关卡名，位置X、Y,敌方单位序号
CALLFORM RANGE_{ENEMY_DRANGE:(ARG:2)}(ARGS,ARG:0,ARG:1,ARG:2)




@RANGE_1,ARGS,ARG:0,ARG:1,ARG:2 ;前方一格
#DIM TEMP
CALLFORM GETOPERATOR_%ARGS%(ARG:0,ARG:1)
TEMP = RESULT
IF TEMP!=-1
    CALLFORM DAMAGE_%ENEMY_DTYPE:(ARG:2)%(ENEMY_ATTACK:(ARG:2),1,TEMP)
    BASE:TEMP:剩余生命值-=RESULT
    PRINTFORMW %ENEMY_NAME:(ARG:2)%对%CALLNAME:TEMP%造成了{RESULT}%ENEMY_DTYPE:(ARG:2)%伤害
ENDIF
RETURN -1

@DAMAGE_物理,ARG:0,ARG:1,ARG:2   ;伤害量，目标是否为干员，目标
IF ARG:1
    RETURN ARG:0*(1000-BASE:(ARG:2):防御)/1000
ELSE
    RETURN ARG:0*(1000-ENEMY_DEFENCE:(ARG:2))/1000
ENDIF

@DAMAGE_法术,ARG:0,ARG:1,ARG:2   ;伤害量，目标是否为干员，目标
IF ARG:1
    RETURN ARG:0*(1000-BASE:(ARG:2):法术抗性)/1000
ELSE
    RETURN ARG:0*(1000-ENEMY_RESIS:(ARG:2))/1000
ENDIF