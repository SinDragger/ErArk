@SHOW_SHOP
SIF DAY:1 < 1
	DAY:1 = 1
SIF DAY:2 < 1
	DAY:2 = 1	

CALL DRAW_MAINMENU
;DRAW_MAINMENU.ERB

@USERSHOP
SELECTCASE RESULT
	CASE 100;指导
		MASTER = 0
		IF TARGET
			REDRAW 1
			BEGIN TRAIN
			;RETURN 1
		ELSE
			PRINTW 还没选定想要见面的干员
		ENDIF
	CASE 101;干员列表
		CALL CHARA_INFO
	CASE 105;作战行动
		CALL SELECTLEVEL
	CASE 106
		CALL SELECT_HANG_OUT
	CASE 107;外交
		CALL DIPLOMA	
	CASE 108
		PRINTW 你在办公室里开始了做不完的工作处理……（时间流逝）
		BEGIN TURNEND
	CASE 109
		CALL TRADE_LIST
	CASE 800
		;SAVEDATA 999,"唯一性测试保存"
		CALL SYSTEM_SAVEGAME
	CASE 900
		;SAVEDATA 999,"唯一性测试保存"
		CALL SYSTEM_LOADGAME
ENDSELECT

@SELECT_HANG_OUT
#DIM maxLength
#DIM nowPosition
;nowPosition = ((CFLAG:FINDCHARA(NO,0)):当前位置)
PRINTFORML 你现在在[%ARR_位置名:(CFLAG:FINDCHARA(NO,0):当前位置)%]
PRINTFORML 你想要前往的地方是？
maxLength=VARSIZE("ARR_位置名")

FOR LOCAL,1,maxLength
	IF LOCAL!=nowPosition
		PRINTFORML [{100+LOCAL}] %ARR_位置名:LOCAL%
	ENDIF
NEXT
PRINTL 
PRINTFORML [100] 随便逛逛
PRINTL 
PRINTFORML [999] 算了，给凯尔希个面子
$INPUT_LOOP
INPUT
nowPosition = RESULT - 100
IF nowPosition > 0 && nowPosition <maxLength
	CLEARLINE 1
	DRAWLINE
	PRINTFORML {nowPosition}
	CFLAG:FINDCHARA(NO,0):当前位置 = nowPosition
ELSEIF nowPosition == 0
	CLEARLINE 1
ELSE
	CLEARLINE 1
	GOTO INPUT_LOOP
ENDIF
;nowPosition = CFLAG:FINDCHARA(NO,0):当前位置
PRINTFORML 你现在在[%ARR_位置名:(CFLAG:FINDCHARA(NO,0):当前位置)%]
;PRINTFORML 你来到了%ARR_位置名:(CFLAG:FINDCHARA(NO,0):当前位置)%
WAIT

@CHARA_POSITION_S(ARG)
#FUNCTIONS
#DIM NOW_POSITION
LOCALS = %ARR_位置名:(CFLAG:ARG:当前位置)%
RETURNF LOCALS